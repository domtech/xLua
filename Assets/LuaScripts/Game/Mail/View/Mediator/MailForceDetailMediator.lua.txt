---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by pengzhou.
--- DateTime: 2019-09-26 10:44
---


local _mediatorOwner = null;
local _itemFactory;
local _tItem = {};


--- OnStart 
function OnStart()
    _itemFactory = CS.ItemRendererFactory(
        function(itemGameObject)
            return CS.BaseScriptItemRendererViewForLua(itemGameObject);  -- 返回创建的 ItemRender
        end
    );
    list.itemFactory = _itemFactory;
end

--- OnPostCreateView 
--- @param mediatorOwner 
--- @param data          
function OnPostCreateView( mediatorOwner, data )
    _mediatorOwner = mediatorOwner;
    title.text = CS.Language.GetContent("mass012"); --  部队详情

    CS.UIEventListener.Get(close).onClick = onCloseClick;
    CS.UIEventListener.Get(dragArea).onPress = onDragAreaPress;
    CS.UIEventListener.Get(dragArea).onDrag = onDragAreaDrag;
end

--- 销毁
function OnDispose()
    CS.UIEventListener.Get(close).onClick = nil;
    CS.UIEventListener.Get(dragArea).onPress = nil;
    CS.UIEventListener.Get(dragArea).onDrag = nil;
    if _itemFactory ~= nil then
        _itemFactory:Dispose();
        _itemFactory = nil;
    end
end

--- 由C#调用,刷新数据显示
--- @param data MailFightPlayerBattleVO
function OnShowViewAndRefresh(data)
    if data == nil then
        -- body
        return;
    end
    list.data = data;
end

function OnAfterHideView()
 
end

function onCloseClick(go)
    _mediatorOwner:HideView();
end

---刷新界面
function OnDragonClick(obj)
    list:Reposition();
end